define(["jquery","enrol_payment/spin","core/str","core/config"],function(a,b,c,d){var e={checkEnrol:function(b,c,e,f,g){a.ajax({url:b,method:"POST",data:{courseid:c,paymentid:g},success:function(a){var b=JSON.parse(a);if(b.result===!0)window.location.href=f;else{if(b.result!==!1||!b.reason)return;window.location.href=d.wwwroot+"/enrol/payment/paypalPending.php?id="+c.toString()+"&reason="+b.reason}},error:function(){alert(e[0])}})},init:function(a,d,e,f){var g=this,h=c.get_strings([{key:"errorcheckingenrolment",component:"enrol_payment"},{key:"errorpaymentpending",component:"enrol_payment"}]);h.done(function(c){var h={lines:13,length:38,width:17,radius:45,scale:.45,corners:1,color:"#000000",fadeColor:"transparent",speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,zIndex:2e9,className:"spinner",shadow:"0 0 1px transparent",position:"relative"},i=document.getElementById("spin-container"),j=new b(h);j.spin(i),g.checkEnrol(d,e,c,a,f),setInterval(function(){g.checkEnrol(d,e,c,a,f)},5e3)})}};return e});