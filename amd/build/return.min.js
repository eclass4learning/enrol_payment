define(["jquery","enrol_payment/spin","core/str","core/config"],function(i,c,n,a){return{checkEnrol:function(n,r,e,o,t){i.ajax({url:n,method:"POST",data:{courseid:r,paymentid:t},success:function(n){var e=JSON.parse(n);if(!0===e.result)window.location.href=o;else{if(!1!==e.result||!e.reason)return;window.location.href=a.wwwroot+"/enrol/payment/paypalPending.php?id="+r.toString()+"&reason="+e.reason}},error:function(){alert(e[0])}})},init:function(r,o,t,i){var a=this;n.get_strings([{key:"errorcheckingenrolment",component:"enrol_payment"},{key:"errorpaymentpending",component:"enrol_payment"}]).done(function(n){var e=document.getElementById("spin-container");new c({lines:13,length:38,width:17,radius:45,scale:.45,corners:1,color:"#000000",fadeColor:"transparent",speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,zIndex:2e9,className:"spinner",shadow:"0 0 1px transparent",position:"relative"}).spin(e),a.checkEnrol(o,t,n,r,i),setInterval(function(){a.checkEnrol(o,t,n,r,i)},5e3)})}}});